<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="author" content="wilsonIsOnly" />
<meta name="keywords" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>追梦者 / ES6知识点(二)</title>
<link rel="icon" href="/favicon.png" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.png" type="image/x-icon" />
<link href="http://tony0511.github.io//blog/feed.xml" rel="alternate" title="追梦者" type="application/atom+xml" />
<link rel="stylesheet" href="/lib/font-awesome/font-awesome.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/blog.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/code/sunburst.css" />

<style>
	.particles-js-canvas-el {
	    position: absolute;
	    left: 0;
	    top: 0;
	    z-index: -1;
	}

	/*最近访客的设置*/
	#visitors{
		text-align: center;
	}
	#visitors p{
		font-weight: bold;
	    font-size: 16px;
	    padding: 20px;
	}
	#ds-recent-visitors {
	    display: flex;
	    justify-content: center;
	}
</style>
</head>

<body class="page-type-post">

<div class="main">
	<div class="trace">/ <a href="/blog/">追梦者</a> / ES6知识点(二)</div>

<article>
	<h1><a href="/blog/posts/es6_2">ES6知识点(二)</a></h1>
	
	<p class="meta">
	<span class="datetime">2016-10-31</span> posted in [<a href="/blog/category/discovery" class="category">What's New</a>]
</p>
	<h3 id="六函数的扩展">六、函数的扩展</h3>

<ol>
  <li>函数参数的默认值</li>
</ol>

<p>ES6中，允许直接为函数的参数设置默认值，如：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>function log(x, y = 'World') {
  console.log(x, y);
}

log('Hello') // Hello World
log('Hello', 'China') // Hello China
log('Hello', '') // Hello
</code></pre>
</div>

<ol>
  <li>rest参数</li>
</ol>

<p>ES6中引入rest参数，来获取函数未知数量的参数，从而不需要使用arguments对象来遍历参数。如下所示：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>function add(...values) {
  let sum = 0;

  for (var val of values) {
    sum += val;
  }

  return sum;
}

add(2, 5, 3) // 10
</code></pre>
</div>

<p>注意，rest参数之后不能再有其他参数（即只能是最后一个参数），否则会报错。</p>

<p>函数的length属性，不包括rest参数。</p>

<ol>
  <li>…扩展运算符</li>
</ol>

<p>扩展运算符（spread）是三个点（…）。它好比rest参数的逆运算，将一个数组转为用逗号分隔的参数序列。</p>

<p><strong>扩展运算符的运用</strong></p>

<p>(1)合并数组</p>

<div class="highlighter-rouge"><pre class="highlight"><code>// ES5
[1, 2].concat(more)
// ES6
[1, 2, ...more]

var arr1 = ['a', 'b'];
var arr2 = ['c'];
var arr3 = ['d', 'e'];

// ES5的合并数组
arr1.concat(arr2, arr3);
// [ 'a', 'b', 'c', 'd', 'e' ]

// ES6的合并数组
[...arr1, ...arr2, ...arr3]
// [ 'a', 'b', 'c', 'd', 'e' ]
</code></pre>
</div>

<p>(2)函数的返回值</p>

<p>JavaScript的函数只能返回一个值，如果需要返回多个值，只能返回数组或对象。扩展运算符提供了解决这个问题的一种变通方法。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var dateFields = readDateFields(database);
var d = new Date(...dateFields);
</code></pre>
</div>

<p>上面代码从数据库取出一行数据，通过扩展运算符，直接将其传入构造函数Date。</p>

<p>(3)字符串</p>

<p>扩展运算符还可以将字符串转为真正的数组。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[...'hello']
// [ "h", "e", "l", "l", "o" ]
</code></pre>
</div>

<p>上面的写法，有一个重要的好处，那就是能够正确识别32位的Unicode字符。</p>

<p>(4)实现了Iterator接口的对象</p>

<p>任何Iterator接口的对象，都可以用扩展运算符转为真正的数组。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var nodeList = document.querySelectorAll('div');
var array = [...nodeList];
</code></pre>
</div>

<ol>
  <li>箭头函数</li>
</ol>

<p>ES6允许使用“箭头”（=&gt;）定义函数。</p>

<p>传入1个参数：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var f = v =&gt; v;
//等同于
var f = function(v) {
  return v;
};
</code></pre>
</div>

<p>无参数或传入多个参数：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var f = () =&gt; 5;
// 等同于
var f = function () { return 5 };

var sum = (num1, num2) =&gt; num1 + num2;
// 等同于
var sum = function(num1, num2) {
  return num1 + num2;
};
</code></pre>
</div>

<p>返回一个对象：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var getTempItem = id =&gt; ({ id: id, name: "Temp" });
</code></pre>
</div>

<p>简化回调函数：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>// 正常函数写法
var result = values.sort(function (a, b) {
  return a - b;
});

// 箭头函数写法
var result = values.sort((a, b) =&gt; a - b);
</code></pre>
</div>

<p>使用注意点：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>（1）函数体内的this对象，就是定义时所在的对象，而不是使用时所在的对象。

（2）不可以当作构造函数，也就是说，不可以使用new命令，否则会抛出一个错误。

（3）不可以使用arguments对象，该对象在函数体内不存在。如果要用，可以用Rest参数代替。

（4）不可以使用yield命令，因此箭头函数不能用作Generator函数。

上面四点中，第一点尤其值得注意。this对象的指向是可变的，但是在箭头函数中，它是固定的。
</code></pre>
</div>

	
</article>


	<footer>
		<p>&copy; Since 2016 <a href="http://wilsonis.github.io/myblog/">wilsonisonly.com</a></p>
	</footer>
</div>

<nav class="block">
	<ul>
		<li class="thinking"><a href="/blog/category/thinking/">Why...</a></li>
		<li class="experience"><a href="/blog/category/experience/">How To Do</a></li>
		<li class="discovery"><a href="/blog/category/discovery/">What's New</a></li>
		<li class="criticism"><a href="/blog/category/criticism/">What's Wrong</a></li>
		<li class="communication"><a href="/blog/category/communication/">Sharing</a></li>
		
	</ul>
</nav>
<aside id="page">
	<h2><a href="/"><i class="fa fa-home"></i></a> / <a href="/blog/">追梦者</a><a href="/blog/feed.xml" class="feed-link" title="Subscribe"><i class="fa fa-rss-square"></i></a></h2>

	<div class="block block-about">
		<h3>关于</h3>
		<figure>
			<img src="../potrait.png" width="80" height="80" />
			<figcaption><strong>wilsonIsOnly</strong></figcaption>
		</figure>
	</div>

	<div class="block block-license">
		<h3>版权申明</h3>
		<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/2.5/cn/" target="_blank" class="hide-target-icon" title="本站(博客)作品全部采用知识共享署名-非商业性使用-禁止演绎 2.5 中国大陆许可协议进行许可。转载请通知作者并注明出处。"><img alt="知识共享许可协议" src="http://i.creativecommons.org/l/by-nc-nd/2.5/cn/88x31.png" /></a></p>
	</div>

	<div class="block block-thank">
		<h3>Powered by</h3>
		<p>
			<a href="http://elfjs.com/" target="_blank">elf+js</a>,
			<a href="https://github.com/" target="_blank">GitHub</a>,
			<a href="http://softwaremaniacs.org/soft/highlight/en/">HighlightJS</a>,
			<a href="https://github.com/mojombo/jekyll" target="_blank">jekyll</a>,
		</p>
	</div>

	<!--  最近访客 -->
	<div id="visitors" class="block">
		<p>最近访客</p>
		<ul class="ds-recent-visitors" data-num-items="10"></ul>
		<p>你是第
			<img border="0" src="http://cc.amazingcounters.com/counter.php?i=3212244&c=9637045" alt="AmazingCounters.com">
			位访客
		</p>
	</div>
</aside>

<script src="../lib/particles/particles.js"></script>
<script src="../lib/particles/app.js"></script>
<script type="text/javascript" src="/lib/elf/elf-0.5.0.min.js"></script>
<script src="/lib/highlight/highlight.min.js"></script>
<script src="/assets/js/site.js"></script>

<script>
site.URL_GOOGLE_API = '';

site.VAR_SITE_NAME = '追梦者';
site.VAR_AUTO_LOAD_ON_SCROLL = 0;
</script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2dd5c7dc6775d11bc19cce5ce2f9bc70";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

<script src="https://www.sobot.com/chat/frame/js/entrance.js?sysNum=849a418af6db4f148b63884b350e60b5" class="zhiCustomBtn" id="zhichiScript" data-args="属性名1=属性值1&属性名2=属性值2"></script>
</body>
</html>
